{"version":3,"sources":["../lib/worker.js"],"names":["global","$exports","process","on","message","require","Object","assign","sandbox","context","JSON","parse","execute","code","err","value","send"],"mappings":";;AAAA;;;;;;AAEAA,OAAOC,QAAP,GAAkB,EAAlB;;AAEAC,QAAQC,EAAR,CAAW,SAAX,EAAuBC,OAAD,IAAa;AACjC,MAAIA,QAAQC,OAAZ,EAAqB;AACnBC,WAAOC,MAAP,CAAcP,OAAOC,QAArB,EAA+BI,QAAQD,QAAQC,OAAhB,CAA/B;AACA;AACD;;AAED,QAAMG,UAAU,uBAAhB;;AAEAR,SAAOS,OAAP,GAAiBC,KAAKC,KAAL,CAAWP,QAAQK,OAAnB,CAAjB;;AAEAD,UAAQI,OAAR,CAAgBR,QAAQS,IAAxB,EAA8B,CAACC,GAAD,EAAMC,KAAN,KAAgB;AAC5Cb,YAAQc,IAAR,CAAa,EAACF,QAAD,EAAMC,YAAN,EAAb;AACD,GAFD;AAGD,CAbD","file":"worker.js","sourcesContent":["import Sandbox from './sandbox';\n\nglobal.$exports = {};\n\nprocess.on('message', (message) => {\n  if (message.require) {\n    Object.assign(global.$exports, require(message.require));\n    return;\n  }\n\n  const sandbox = new Sandbox();\n\n  global.context = JSON.parse(message.context);\n\n  sandbox.execute(message.code, (err, value) => {\n    process.send({err, value});\n  });\n});\n"]}